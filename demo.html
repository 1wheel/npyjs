<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <script src="npy.js"></script>
    </head>
    <body>
        <script>

        var tests = [
            [],
            [91, 48, 83, 47, 36],
            [01, 71, 70, 59, 77, 32, 63, 67, 40, 75],
            [74, 51, 26, 66, 73, 96, 21, 26, 35, 88, 52, 49, 28, 63, 11]
        ];

        function arraysAreEqual(a, b) {
            return a === b || (
                !!a && !!b &&
                a.length === b.length &&
                a.map((val, idx) => val === b[idx])
                    .reduce((prev, cur) => (prev && cur), true)
            );
        }

        function assertArraysEqual(a, b) {
            if (arraysAreEqual(a, b)) {
                console.info(true);
            } else {
                console.error(a, b, "not equal!")
            }
        }

        n = new npyjs();

        // Sanity tests:
        n.load('data/1d-0.npy', (a, n) => { assertArraysEqual(a, tests[0]) })
        n.load('data/1d-5.npy', (a, n) => { assertArraysEqual(a, tests[1]) })
        n.load('data/1d-10.npy', (a, n) => { assertArraysEqual(a, tests[2]) })
        n.load('data/1d-15.npy', (a, n) => { assertArraysEqual(a, tests[3]) })

        // Throughput tests:
        // n.load('data/2d-100x100.npy', (a, n) => { assertArraysEqual(a.slice(0, 3), [105, 169, 119])) })
        // n.load('data/2d-1000x1000.npy', (a, n) => { assertArraysEqual(a.slice(0, 3), [175, 118, 110])) })

        // Dimensionality tests:
        n.load('data/3d-2x2x2.npy', (a, n) => { assertArraysEqual(a, [14, 231, 252, 169, 44, 140, 109, 42]) })

        // >256 tests:
        n.load('data/1d-256.npy', (a, n) => { assertArraysEqual(a, [255, 255, 255, 256, 256, 256, 255, 255, 255]) })
        n.load('data/3d-bignum.npy', (a, n) => { assertArraysEqual(a, [5968, 8083, 8387, 3707, 1837, 5890, 8333, 1403]) })

        </script>
    </body>
</html>
